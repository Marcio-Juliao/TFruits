<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - TFruit</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="NavBar_Tfruit.css">
    <link rel="stylesheet" href="footer2.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="icon" href="./favicon.png" />
</head>

<body>
    <div class="nav">
        <div class="DireitaNav">
            <img src="TFruit_Logo.png" class="logo">
            <a href="index.html">Home</a>|
            <a href="calculadora.html">Simulador Financeiro</a>|
            <a href="Quem_somos.html"> Sobre Nós</a>
        </div>

        <div class="EsquerdaNav">
            <a href="login.html">Login</a>|
            <b class="b">Cadastrar</b>
        </div>
    </div>

    <main class="CDpai">
        <section class="CDcard">
            <fieldset class="CDdivscroll">
                <legend class="CDtitulo">CADASTRO</legend>
                <div class="CDdado">
                    <label for="negocio">Nome do Negócio</label>
                    <input style="text-align: center;" type="text" id="input_negocio" name="negocio" placeholder="SPTech">
                </div>
                <div class="CDdado">
                    <label for="email">Email</label>
                    <input style="text-align: center;" type="email" name="email" id="input_email"
                        placeholder="example@mail.com">
                </div>
                <div class="CDdado">
                    <label for="telefone">Telefone Fixo</label>
                    <input style="text-align: center;" type="tel" name="telefone" id="input_telefone"
                        placeholder="(11) 9999-9999">
                </div>
                <div class="CDdado">
                    <label for="cnpj">CNPJ</label>
                    <input style="text-align: center;" type="text" name="cnpj" id="input_cnpj"
                        placeholder="00.000.000/0000-00">
                </div>
                <div class="CDdado">
                    <label for="cep">CEP</label>
                    <input style="text-align: center;" type="text" id="input_cep" placeholder="00000-000">
                </div>
                <div class="CDdado">
                    <label for="nmr">Número do endereço</label>
                    <input style="text-align: center;" type="number" id="input_nmr" name="nmr" placeholder="000">
                </div>
                <div class="CDdado">
                    <label for="complemento">Complemento</label>
                    <input style="text-align: center;" type="text" id="input_complemento" name="complemento"
                        placeholder="Andar 0">
                </div>
            </fieldset>
            <button onclick="cadastrar()" class="CDbotaoCadastro">CADASTRAR</button>
        </section>
        <div class="CDimagem">
            <img src="./elemento-cadastro.png" alt="" class="CDelemento" height="600px">
        </div>
    </main>
    <div class="footer">
        <p>@TFruit2024</p>
        <p>tfruit@sptech.school</p>
    </div>

</body>

</html>

<script>

    function cadastrar() {
        var nomeVar = input_negocio.value;
        var emailVar = input_email.value;
        var telFixVar = input_telefone.value;
        var cnpjVar = input_cnpj.value;
        var cepVar = input_cep.value;
        var numEndVar = input_nmr.value;
        var complementoVar = input_complemento.value;

        if (
            nomeVar === "" ||
            emailVar === "" ||
            telFixVar === "" ||
            cnpjVar === "" ||
            cepVar === "" ||
            numEndVar === "" ||
            complementoVar === ""
        ) {
            alert("Verifique se todos os campos estão preenchidos!");
            return false;
        }

        fetch("/empresas/cadastrarEmpresa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                nomeServer: nomeVar,
                emailServer: emailVar,
                telFixoServer: telFixVar,
                cnpjServer: cnpjVar,
                cepServer: cepVar,
                numEndServer: numEndVar,
                complementoServer: complementoVar
            }),
        })
            .then(function (resposta) {
                if (resposta.ok) {
                    alert("Cadastro realizado com sucesso!");
                    setTimeout(() => {
                        window.location = "Pós_Cadastro.html";
                    }, 2000);
                } else {
                    throw new Error("Houve um erro ao tentar realizar o cadastro!");
                }
            })
            .catch(function (error) {
                console.error("#ERRO:", error);
                alert("Houve um erro ao tentar realizar o cadastro!");
            });

        return false;
    }
</script>